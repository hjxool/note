## 基本概念（考点）

- **定义**：软件产品在规定条件和时间内完成规定功能的能力
- **软件**可靠性 和 **硬件**可靠性 的**区别**
  - **复杂性**
    - ==软件更复杂==，因为涉及到业务逻辑等方面
  - **物理退化**
    - 可以理解为硬件风化、老化
    - ==软件不存在物理退化==
  - **唯一性**
    - ==软件是唯一的==，因为拷贝的代码也是一样的实现逻辑
    - 而硬件即使是同一厂商生产，也存在细微的差别
  - **版本更新周期**
    - 硬件更新慢
    - 软件更新快
- 软件可靠性的**定量**描述
  - （考点）平均==无故障==时间（==MTTF==）：发生==故障前正常运行的时间==
  - （考点）平均==修复==时间（==MTTR==）：发生==故障后的修复时间==
  - （考点）平均故障==间隔==时间（==MTBF==）：==两次故障之间==的平均工作时间。这个指标主要用来评估系统的可靠性
  - 规定时间：运行时间、执行时间
  - 失效概率：初始为0，随运行时间越久，不断趋近于1
  - 可靠度：规定条件、时间内，不发生故障的概率
    - 公式：`1 - 失效概率`
  - 失效强度：单位时间内系统出现故障的概率
- `全系统可用性 = MTTF / MTBF * 100%`
- 计算==可靠性==（同第二章计算可靠性模型）
  - ==串联==系统：`整个系统可靠性 = R1 * ... * Rn`
  - ==并联==系统：`整个系统可靠性 = 1 - (1 - R1) * ... * (1 - Rn)`
- **可靠性测试**的**意义**
  - 软件失效带来灾难性**后果**
  - 软件失效在整个计算机系统中**失效比例较高**
    - 因为涉及的因素太多
  - 软件可靠性**技术不成熟**
  - 软件可靠性是造成**费用增长**的主要原因之一
    - 因为软件开发成本投入大
  - 软件对生产活动和社会影响越来越大，**重要**
- **广义**的软件可靠性测试：覆盖了软件开发的**整个**生命周期
  - **狭义**的软件可靠性测试：集中在**测试阶段**

## 可靠性 建模

- **定义**：估算可靠性所建立的框图和数学模型
- **影响**软件可靠性的主要**因素**
  - ==运行环境==
    - 软件运行时相关的操作系统、数据库、网络都属于运行环境
  - 软件==规模==
    - 软件越大，包含内容越多，越容易出错
  - 软件==内部结构==
    - 即软件内部构件组织方式、数据流向
  - 软件==开发方法==和==开发环境==
    - 开发方法：敏捷开发等
  - 软件可靠性==投入==
    - 人力、财力的投入
- 可靠性**模型组成**
  - 模型==假设==
    - 即假设案例
  - ==性能度量==
  - ==参数估计==方法
    - 通过统计学方法来估计模型中的未知参数
  - ==数据要求==
    - 如响应时间、出现问题后的修复时间
- 绝大多数模型包含3个**共同假设**
  - ==代表==性假设
    - 假设测试的特例，代表实际使用中的情况
  - ==独立==性假设
    - 假设每次故障的发生是相互独立的
  - ==相同==性假设
    - 假设所有软件失效的后果是相同的
- （了解）软件可靠性模型分类：见书P~346~

## 可靠性 管理

- **定义**：对 ==软件工程== 各阶段==流程==进行管理==把控==

## 可靠性 设计

- **定义**：软件可靠性设计 包含在==软件设计阶段==，**目的**是全面满足软件的可靠性要求
- 可靠性**设计原则**
  - ==不能==与其他设计原则==冲突==
  - ==实现最终目标==，提高软件可靠性
  - ==确定==软件可靠性==目标==，并且该目标排在功能和用户需求==之后==
- （考点）可靠性设计 **技术**
  - ==容错==设计
    - 允许出错，出错后不影响正常运行
  - ==检错==设计
    - 能检查出错误在哪
    - 主要考虑以下几点
      - ==检测对象==
        - 包含
          - 检测点
            - 容易出错、影响大的地方
          - 检测内容
            - 有代表性、易于判断的地方
      - 检测==延时==
        - 从故障**发生**到故障**被检测到**的时间
      - ==实现==方式
        - 一般直接返回检测的结果，超出合理范围就代表出现了问题
      - ==处理==方式
        - 一般是停止软件并告警
  - ==降低复杂度==设计
    - 越简单的东西越不容易出问题
- 提高可靠性的技术可分为
  - ==避错==技术
    - 正式运行==之前==
  - ==容错==技术（考点）
    - **定义**：运行过程中发生错误时，==仍能保持正常工作，不影响正确结果==
    - 运行==过程中==
    - 主要采用==冗余方法==来消除故障影响
      - 冗余：即准备多个硬件、服务器等资源
    - 容错技术分为
      - ==N版本程序设计==
        - 并行运行多个功能相同，但编程语言、使用方法、开发环境不同的程序，检测输出结果，多的正确的结果就采用
        - **特点**：==同一功能用多种方式实现==、==概率==
      - ==恢复块方法==
        - 又称==动态冗余==、==主动冗余==，主块测试不合格就依次调用备用块检测执行结果
        - **特点**：==替补==、==热备份==、==冷备份==
          - 热备份：出现错误时，使用备用模块
          - 冷备份：与主模块一同工作
      - ==防卫式程序设计==
        - **最常用**的方式，因为成本低
        - **特点**：就是`try catch`，遇到错误就绕过恢复正常状态
        - **区别**：在代码中下功夫，前两个方法是在程序块上下功夫
      - ==双机容错技术==
        - 软硬件结合的方案，由==两台服务器（主、副服务器）、一个外接存储设备==，采用“==心跳==”检测主服务器运行状态，如果“心跳”断了，就将系统资源转移到备用服务器，备用服务器代替主服务器工作
        - （考点）**工作模式**
          - 双机==热备==模式
            - 副机处于等待状态，随时准备接管
          - 双机==互备==模式
            - 主副机都在工作，并同步备份数据
          - 双机==双工==模式
            - 主副机都在工作

### 负载均衡

- 是 **集群系统** 中一项重要技术，提高系统**可用性**、**可靠性**，本质是用多个服务器分担请求负载，合理分配资源
- 实现 负载均衡 的技术有以下几种
  - （考点）基于==特定软件==的负载均衡
    - 属于==应用层==技术，很多网络协议支持==重定向==
    - 特定软件：指网络协议
    - 如**Nginx**，后端根据事先定好的规则将客户端请求分发到其他服务器，使用HTTP给客户端返回重定向响应，客户端会自动跳转到新地址，重发请求
  - （考点）基于==DNS==的负载均衡
    - 属于==传输层==技术
    - **原理**：DNS服务器 中为同一个主机名配置多个IP地址，在应答DNS查询时，把客户端请求引向不同的IP地址（也就是不同的服务器）
  - 基于==NAT==的负载均衡
    - 属于==网络层==技术
    - 通过网络地址转换（NAT），把外部请求的目标地址转换成内部服务器的地址，并在请求返回时再把内部服务器的地址转换回外部地址
    - 如家用**路由器**，会把你和家人上网的请求分配到不同的设备上，确保每个人都能顺畅上网
  - （考点）==反向代理==
    - 属于==应用层（HTTP层）==技术
    - 如Niginx代理服务器，将客户端请求按预先配置的规则（如轮询、权重）分给不同服务器
    - 何为**反向**：**正向代理**指，客户端通过代理服务器**访问外部**网络，代理服务器站在客户端这边。而**反向**指代理服务器站在服务器一边，不是代理客户端请求访问外部资源，而是**访问内部**网络
    - 与 **基于NAT负载均衡** 的**区别**
      - 基于**NAT**的负载均衡 更偏向于**网络层**的**地址转换**
      - **反向代理**的负载均衡 则更偏向于**应用层**的**请求处理**
  - ==混合==型负载均衡
    - 结合多种负载均衡方式的优点，来实现更高效的负载均衡
    - 如，同时使用 DNS负载均衡 和 反向代理

## 可靠性 测试

- 主要**活动**
  1. 确定可靠性目标
  2. 运行剖面的开发
     - 运行剖面：软件交互的模型
  3. 测试用例
  4. 执行测试
  5. 测试结果分析
- 测试**步骤**
  1. 定义软件==运行剖面==
  2. 设计==测试==可靠性的==用例==
  3. 进行测试

## 可靠性 评价

- 评价**步骤**
  1. 选择可靠性模型
  2. 收集测试数据
     - 注：收集的是==软件失效数据==
  3. 进行评估和预测
     - 即判断==是否达到==可靠性==目标==