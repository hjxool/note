## 信息安全基础

### 防范体系

- 为保障系统安全搭建的体系，分为以下几层（参考OSI网络体系结构）
  - 物理环境安全
    - 即物理层面的线路、设备、机房的安全
  - 操作系统安全
    - 计算机==网络内==使用的==操作系统==才归为此类
      - 如个人电脑，不联网不属于操作系统安全
    - 包含三个方面
      - 操作系统本身的==漏洞==
      - ==防火墙==设置
      - ==病毒==
  - 网络的安全
    - 后有章节详细说明，简单来说就是网络==身份认证==、网络==资源访问==权限、数据==加密==等
  - 应用的安全
    - 开发的软件自身存在安全问题
  - 管理的安全
    - 对人的管理

### 基本要素

- ==机密==性
  - 也叫==保密==性，确保信息==不暴露==给未授权人员或程序进程
- ==完整==性
  - 只有获得==允许才能修改==数据，并判断数据==是否被篡改==
- ==可用==性
  - 得到授权的实体可以在需要时访问数据，即攻击者不能占用所有资源而阻碍授权实体的操作
- 可控性
  - ==控制==可控范围内的信息流，及行为
- 可审查性
  - ==记录和追踪==用户的操作行为，以便在发生安全事件时进行审查和追溯

### 范围

- 设备安全
  - 设备的可靠性、稳定性、可用性
    - 可靠性：设备如果出现问题，能快速恢复 
    - 稳定性：设备能一直运转
    - 可用性：被访问时是能被访问的状态
- 数据安全
  - 防止数据被篡改，包括：秘密性、完整性、可用性
- 内容安全
  - 容易和数据安全搞混，数据安全是数据是否完整，内容安全是数据是否合规，所以内容安全是在政治、道德等方面的要求
- 信息系统的服务功能
  - 即人的行为要安全、保密

### 存储安全

- 存储安全包括
  - 信息使用的安全
    - 用户的识别和身份标识，用户存取权限控制
  - 系统安全监控
    - 使用日志和审计对系统进行监控
  - 网络服务器要加装病毒检测系统

### 网络安全

- 网络安全==漏洞==：设备的安全、软件的安全、兼容性漏洞
- 网络安全==威胁==：未授权的访问、信息泄露等
- 网络安全==措施==：登录认证、保密等

### 安全系统的组成

- ==技术体系==涉及以下技术
  - 基础安全==设备==：如加密卡、身份认证卡等加密认证设备
  - 计算机==网络==安全：==信息==在网络传输中的安全防范。如加密传输、数字签名、摘要等
  - ==操作系统==安全：系统无漏洞、无后门等
  - ==数据库==安全：分数据库==管理系统==安全、数据库==应用系统==安全两部分
  - ==终端==安全设备：从电信网终端设备的角度，如电话密码机、传真密码机等 
- 组织机构
- 管理体系

## 信息安全技术（考点）

- 也叫机密性

### 对称 加密

- 即数据==加密==和==解密==的==密钥==是==相同==的，属于==不公开密钥==加密算法
- 密码形式有两种
  - ==分组==密码（考点）
    - 把明文数据分成==固定长度的块==（通常是64位或128位），然后对==每个块==进行==独立加密==
    - 分组密码算法
      - ==DES==（考点）
        - 相对而言，==安全性最低==，==64位==密钥（其中8位用于校验，实际密钥只有56位）
        - 明文和密文都是以==64位为一组==
        - 因为较短，所以可以被穷举法破解
      - ==3DES==（考点）
        - 密钥长度==112位==，即两个56位密钥，加密三次
        - 具体流程
          - 发送方加密：前56位K1进行加密 -> 后56位K2进行解密 -> K1加密
          - 接收方解密：K1解密 -> K2加密 -> K1解密
      - ==IDEA==（考点）
        - 密钥长度==128位==，因此比**DES**加密性好
        - 明文和密文都是以==64位为一组==
      - ==AES==
        - ==最常用==的加密算法，替代**DES**，支持==128位==、==192位==、==256位==密钥长度
  - ==序列==密码
    - 把明文数据当作一个连续的==比特==流来处理，==逐位或逐字节==进行==加密==
      - 如明文数据“HELLO”，会生成一个与“HELLO”长度相同的**伪随机**密钥流，然后==逐字节进行异或操作==
    - 序列密码算法
      - ==RC5==
        - 很多数据安全公司使用
  - 总结
    - 简单来说，分组密码是分组进行运算，序列密码是按字节运算
- 优点
  - 因为密钥一般来说较短，所以加密==速度快==
  - 因为速度快，所以适合==大量数据==的加密
- 缺点
  - 因为密钥一般来说较短，所以加密==强度低==
  - 因为要保持双方密钥同步，如何安全告诉对方密钥就是个问题，因此==密钥分发困难==

### 非对称 加密

- 即数据==加密==和==解密==的==密钥==是==不同==，分为==公钥==和==私钥==，属于==公开密钥==加密算法
  - 公钥：所有人都可获取
  - 私钥：私人持有，不公开
  - 注意！通信双方都要有自己的公钥和私钥
- 优点
  - 密钥长度是对称加密的好几倍，因此加密==强度高==
  - 可以实现==数字签名==与验证
- 缺点
  - 因为密钥长，所以==速度慢==
- 基本原理
  - 简单理解就是，不再需要双方同步密钥，双方各自持有自己的密码，加密时使用公开的密钥，解密时使用自己的密钥，因为不需要传输密钥，因此安全
  - 而公钥和私钥是通过难以逆推的数学公式得到的一对，如两数相乘可得到一个结果，但很难通过结果反推它是由哪两个数相乘得到，尤其是结果非常大时，这就保证了私钥不容易被破解
- 常见非对称加密算法
  - ==RSA==（考点）
    - 密钥长度==512位==或==1024位==
    - 加密、解密速度很慢，因此主要用于==数字签名==
- 基本流程
  1. A和B通信，A、B==各生成一对==公钥和私钥
  2. A和B==**互换**公钥==，==私钥自己保存==
  3. ==A发==消息给B，先==用B的公钥==加密信息，再发送
  4. ==B收==到信息后，==用自己的私钥==解密

### 数字信封

- 基本原理
  - 简单来说就是将对称加密和非对称加密各自的优点结合，对数据进行对称加密，提升速度，用非对称密钥加密对称密钥，解决了密钥传输安全性
  - ==信==是==对称加密==的==密钥==，因此可对大量数据快速加密
  - 为保证传输时密钥不被破解，==信封==即再对==密钥==进行==非对称加密==
- 具体流程
  1. 发送方将**数据**用==对称密钥==加密后传输
  2. 然后将==对称密钥==用**接收方**==公钥==进行==非对称加密==后发给接收方
  3. 接收方收到数字信封，用自己的==私钥==解密==信封==，得到==对称密钥==
  4. 然后用==对称密钥==解密得到原数据

## 信息完整性

### 信息摘要

- 简单来说就是通过技术手段提取出来数据的特征，数据缺失，信息摘要也会变化，由此可验证完整性
- 信息摘要验证流程
  1. 发送方将==数据和信息摘要一起发==给接收方
  2. 接收方收到数据后，==重新生成信息摘要==，并与收到的信息摘要==进行对比==，相同，说明数据正确
- 特点
  - 信息摘要由==哈希函数==算法生成，无论输入多少位数据，输出信息摘要都==固定128位==
  - 单向性。即不可逆，只能由数据生成信息摘要，不能由摘要还原数据
  - 任何==不同数据==都会产生==不同==的==信息摘要==，任何==相同数据==生成的都是==相同==信息摘要
- 信息摘要算法
  - ==MD5==：全称就是 信息摘要算法 ，产生==128位==输出
  - SHA-1：全称安 全散列算法 ，对长度不超 过264位的数据产生160位输出，安全性更高

### 数字签名

-  主要目的就是==防止抵赖==，能==唯一标识==一个==发送方==

- 数字签名流程

  - 本质是利用非对称加密的成对公钥和私钥才能加、解密数据这一特性，反向操作来确认发送者身份

  1. ==发送方==使用自己的==私钥加密==数据
  2. 接收方收到数据后，使用发送方的==公钥解密==数据，这样就能唯一确定发送方，这就是数字签名的过程

- 主要功能

  - 验证数据的==完整性==
  - 发送者==身份认证==
  - ==防止==交易中==抵赖== 
  - 但因为使用私钥加密，公钥解密，所以==缺少机密性==

## 公钥 基础设施 PKI

- 为非对称密钥加密技术服务的基础设施，包含以下几个组成部分
  - 要有==数字证书==
  - 有可颁数字证书的机构，即==签证机构**CA**==

## 访问控制

- 属于系统安全相关
- 访问控制由==主体（用户）==根据==控制策略（权限）==对==客体（文件）==进行不同授权访问
- 访问控制包含==认证==、==控制策略==实现、==审计==3个方面内容
  - 控制策略实现 的方式有以下几种
    - 访问控制==矩阵==（==ACM==）
      - 即将用户和文件列成一张矩阵，列是文件，行是用户，来表示权限规则
      - 缺点是很大，毕竟要列出所有文件，并且有的用户行可能没有文件
    - 访问控制==表==（==ACL==）
      - 目前最常用，**按列**保存权限矩阵
      - 本质其实就是拆分 ACM ，将==文件列单独拆分==保存，就是我们常见的右键文件查看权限，可以看到对应用户有什么程度的权限
    - ==能力表==
      - **按行**保存权限矩阵
      - 即将 ACM 中==用户行单独拆分==保存，一个用户对应哪些文件的访问权限
    - ==授权关系表==
      - 即去掉 ACM 中空的部分，可理解为 ACL 和 能力表 结合，只保留有权限的用户和文件
      - 按用户排序时，显示 能力表 ；按文件排序时，显示 ACL
    - 总结
      - ACM 相当于大而全的总集合
      - ACL 和 能力表 相当于从 ACM 上拆下来的
      - 授权关系表相当于根据需求动态切换 ACL 或 能力表来展示

## 信息安全 抗攻击技术

### 密钥（密码）攻击

- 从3个方面加强安全性
  - 增加密钥长度
  - 设置更复杂密钥
  - 密钥使用随机数

### DOS 拒绝服务攻击

- 拒绝服务，即占用系统资源使其不能为正常用户提供服务，有以下几种渠道
  - ==内部==用户
    - 即局域网内用户
    - 可长时间==占用系统内存==、==CPU==处理时间，使其他用户不能及时得到响应
  - ==外部==用户
    - 即通过外网访问服务器的用户
    - 通过==占用网络==连接，使其他用户得不到网络服务
    - 攻击模式
      - ==消耗资源==
      - 破坏、更改==配置==
      - 破坏、改变==网络部件==
      - 利用==程序==中处理==错误==，使服务失效
- DOS攻击方式
  - ==同步包（SYN）风暴==
    - 即利用三次握手建立连接要等待的规律，**只发**起**第一次**握手请求，而不作出回应，使得本次连接**挂起**，在服务器系统**队列**中等待状态，加之大量同样的请求，使系统队列空间被占满，导致系统挂起
    - 可通过修改注册表限制半开连接数上限，防止系统挂起，以此抵御同步包风暴
  - ==ICMP攻击==
    - 本质是利用程序报错使系统堆栈溢出
    - 如Ping命令，用来测试网络连通性，规定ICMP数据包不能超过64KB，而黑客故意发送远超64KB的ICMP数据包，使TCP/IP堆栈崩溃，电脑死机
  - ==SNMP攻击==
    - 如网络中有一台路由器，SNMP社区字符串设置为默认的“public”。攻击者可以使用SNMP扫描工具，扫描你的网络并尝试使用“public”字符串访问路由器。如果成功，攻击者就可以获取路由器的配置信息，甚至修改路由器的设置，导致网络中断或信息泄露。
- 分布式拒绝服务攻击（DDOS）
  - 是传统DOS攻击的分布式拓展，即增加多台设备发起网络攻击，使其难以追踪，增加攻击频次
  - 攻击者侵入并控制一些计算机，使其同时向特定目标发起DOS攻击，克服了单台设备网络资源限制和增加隐蔽性
- DOS攻击防御方式
  - 加强对数据包的特征识别
    - 攻击者发送的数据包都有==特征字符串==，通过搜寻这个特征字符串，可以确定攻击者设备位置
  - 设置防火墙监视本机端口的使用情况
    - 每个应用软件都有自己占用的端口号，当攻击者针对某个应用发起攻击，这个端口会被频繁访问和使用，说明受到攻击
  - 对通信数据量进行统计
    - 数据包都有头部信息，可以定位发送者来源，如果同一来源有大量不正常的信息发送，则可用以确定攻击设备位置
  - 系统漏洞扫描

### ARP欺骗

- ==ARP== 是 **IP**地址 **转** **MAC**地址 的一个==协议==，转换是通过 IP地址 和 MAC地址 之间的映射表查找
- 正常 ARP原理
  - A想获取B的MAC地址，需要向自己能连接的所有设备广播，说自己IP是多少，MAC地址是多少，想知道IP为XXX的主机的MAC地址，当B收到广播消息，发现是自己的IP地址后，B会返回==单播==响应A，告诉A自己的MAC地址，A收到后，会建立一张表，记录B的IP所对应MAC地址，只要映射存在，以后A就可以直接往对应MAC地址，也就是B发送消息，当长时间不通信，这个地址映射关系就会清除
- ARP欺骗原理
  - 比如C收到A广播的消息后，也向A单播自己的MAC地址，伪装成A要找的主机，之后就可以通过A与C之间的映射，窃取原本A向B发送的消息
- ARP 防范措施
  - 在window系统下，输入命令行指令，==固化ARP表==，阻止ARP欺骗
  - 使用ARP服务器查找映射
    - 即将映射表存到别处，不是主机自己存映射表，而是每次到相关服务器查
  - 采用双向绑定
    - 即在A或B设备上手动配置ARP表，相当于固化ARP表，在收到ARP请求时，会检查并确认来者信息是否正确
  - ARP防护软件

### DNS

- DNS欺骗原理
  - 其实跟ARP映射表类似，ARP是映射 IP地址 和 MAC地址 之间的对应关系，DNS则是映射 IP地址 和 域名 之间的对应关系，因此DNS欺骗就是冒充域名服务器，返回给用户黑客的IP地址，这样用户就只能看到黑客的网页

- DNS欺骗检测
  - ==被动监听==检测
    - 通过旁路监听的方式，捕获所有DNS请求和应答，并建立请求应答映射表。如果在一定时间间隔内，==一个请求收到两个及以上的应答==，说明除了真正的服务器应答外还有黑客应答，则怀疑受到DNS欺骗攻击
  - ==虚假报文探测==
    - ==主动发送探测包==，正常DNS服务器不会有应答，而非DNS服务器会应答，说明受到了攻击
  - ==交叉检查查询==
    - 正常DNS服务器是可以==反向查询==的，即通过IP地址查询域名，而假冒DNS服务器不具备这个能力，如果反向查询的域名不一致，则说明受到DNS欺骗

### IP欺骗

- TCP三次握手简单理解

  1. 客户端向服务器发送 SYN同步标识 ，以及一个 序列号ISN 作为基础值，如`ISN = 100`
  2. 服务端收到后应答ACK和服务端自己的ISN序列，以及SYN同步标识，应答的ACK是在客户端发来的ISN序列基础上+1，如`ACK = 101`，而服务端ISN序列则是独立的，如`ISN = 200`
  3. 客户端收到后应答ACK和自己的ISN序列，客户端应答的ACK是在服务端ISN基础上+1，如`ACK = 201`，而ISN则在服务端返回的ACK基础上+1，如`ISN = 102`

  - 这样做的目的是为了验证三次握手通信是连续的

- 基于三次握手的连接机制，进行欺骗

  1. 首先要==瘫痪被冒充主机==的网络，从而替代对方
  2. 然后连接到主机A来猜测 ==ISN基值==和 ==增加规律==
  3. 然后把自身IP地址伪装成被冒充主机，发送SYN同步标识的请求
  4. 等待目标A回复SYN + ACK包给以瘫痪主机B
  5. 然后伪装B向目标A发送ACK，以及预测的ISN+1
  6. 连接建立，开始通信

- IP欺骗的防范

  - 修改、删除UNIX中相关文件，使得==RPC机制==无法应用
    - RPC机制：允许程序在不同的计算机上执行代码的机制，使得开发者可以像调用本地函数一样调用远程服务
  - 设置防火墙过滤外部访问，但用的是内部IP的连接请求

### 防范技术

#### 端口扫描

- 黑客攻击的目标是==进程==，也==就是端口==，因此要扫描出==对外开放的端口==，扫描的方式
  - 尝试与各端口建立连接，如果端口有回复，说明端口开放（活动端口）
- 端口扫描 原理
  - ==全TCP连接==
    - 使用三次握手建立标准TCP连接
  - ==半打开式扫描（SYN扫描）==
    - 即不走完全部三次握手，发第一次握手时，携带SYN标识，请求同步连接，如果端口回复SYN + ACK，有建立连接的意愿，说明是 活动端口 ，扫描方回一个==RST==，==拒绝==继续连接即可
    - 如果端口回复RST，说明是“死端口”，扫描方不用回复
  - ==FIN扫描==
    - TCP连接在断开时会回复FIN（结束）标识，如果是“死端口”，收到FIN会将其丢弃，并回以RST
    - 反之，如果是开放端口，收到FIN后，只会丢弃，不会回复
    - 由此可判断是否为活动端口
  - 第三方扫描
    - 也叫==代理扫描==，即黑客通过别人的主机，也叫“肉鸡”，来进行扫描，看哪些开放端口可入侵

## 信息安全保证体系和评估方法

### 安全保护等级

- 考点
  - 明确每一级==损害的客体==是什么
    - 客体分为
      - 国家安全
      - 社会秩序
      - 公民
  - 保护的对象和适用范围
- 分为五级（前两级为考点）
  1. ==第一级==：用户自主保护级别
     - 损害：==公民==、法人及==组织==
     - 保护：小企业，==乡镇==单位的信息系统、个人网站
  2. ==第二级==：系统审计保护级别
     - 损害：==社会==秩序、==公民==（严重损害）
     - 保护：中企业、==县市==单位的信息系统
  3. ==第三级==：安全标记保护级别
     - 损害：==国家==、==社会==秩序（严重损害）
     - 保护：==事业单位==、==地市==单位的信息系统
  4. ==第四级==：结构化保护级别
     - 损害：==国家==（严重损害）、==社会==秩序（特别严重损害）
     - 保护：国家==重要领域==、==特别重要==系统
  5. ==第五级==：访问验证保护级别
     - 损害：==国家==（特别严重损害）
     - 保护：国家==重要领域==、==极端重要==系统

### 安全风险管理

- 风险评估前要考虑
  1. 风险评估的==范围==
  2. 风险评估的==目标==
  3. 成立适当的==组织==完成风险评估
  4. 是否有==系统==性的评估==方法==
  5. 获得管理者==批准==
- 基本要素等内容：见书P~214~

## 网络安全技术

### 防火墙

- ==内部网络==和==外部网络==之间加的安全措施，分为
  - ==网络级==防火墙
    - 层次低，只对==数据==包进行==过滤==和==监测==，且只对==数据包头部==的起始地址、状态等属性检测是否异常
  - ==应用级==防火墙
    - 层次高，会检查数据包内容，安全性强，但耗时

### 入侵 检测 系统 IDS

- 防火墙只能监测外网威胁，对来自内网的攻击无能为力，因此就要用到==入侵检测系统 IDS==，是防火墙后的==第二道屏障==
- 原理
  - ==监控==系统、用户==行为==，将当前行为与==知识库==进行==匹配==，匹配到属于入侵行为，就会==上报==给系统和防火墙，==自身不进行处理==
- IDS 不是防火墙那样的软件，而是监听==设备==，==不需要联网==，IDS 要接在所有流量必经的链路上。一般选在以下位置
  - 尽可能接近攻击源
  - 尽可能接近保护资源

### 入侵 防御 系统 IPS

- 防火墙 和 IDS 都是在入侵行为发生后才能检测到，而 IPS 可以提前发现入侵，并进行==防御==，就类似保安
  - 要安装在==网络链路之前==

### 杀毒软件

- 检测和解决==病毒==
  - 注意！与防火墙区分，防火墙是处理网络相关的

### 蜜罐系统

- 诱惑黑客攻击的漏洞百出的系统，就是吸引火力的，不影响安全网络，可以借此了解黑客攻击手段，对安全系统进行升级和优化

## 网络攻击类型

- 考点：知道是哪一类攻击

  ![网络攻击类型.png](https://github.com/hjxool/static-resource-save/blob/main/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB%E7%B1%BB%E5%9E%8B.png?raw=true)

## 网络安全协议

- 七层网络结构，物理层通过物理手段隔离、屏蔽设备，其他层通过==协议==来保证安全

- 有以下几种安全协议

  - 安全套接字协议（==SSL==）

    - HTTPS就是==HTTP + SSL==，安全性高，端口号==443==
    - 用于==加强Web安全传输（HTTP）==

  - 安全外壳协议（==SSH==）

    - 简单来说，它就像是给你和远程服务器之间的通信加了一把锁，确保别人看不到你们的对话内容
    - 用于==加强Telnet / FTP传输==，即**Shell**、==命令行==
      - 看到命令行就选SSH

  - 安全电子交易协议（==SET==）

    - 用于==B2C模式（电子商务）中保障支付安全==

  - ==Kerberos协议==

    - 是一种==网络身份认证==协议

  - ==PGP协议==

    - 基于==RSA==的==邮件==加密==软件==，使用RSA==公钥==进行身份认证，使用==IDEA（128位密钥）==进行数据加密，使用==MD5==进行完整性验证

      - RSA：非对称加密
      - IDEA：对称加密
      - MD5：信息摘要

    - 原理

      - 发送方A有三个密钥：A的私钥、B的公钥(交换得来)、对称加密得到的密钥
      - 接收方B有两个密钥：A的公钥(交换得来)、B的私钥

      1. （数字信封流程）A先用 对称密钥 加密信息，再用 B的公钥 加密 对称密钥，形成数字信封
      2. 将 信封 交给第三方保管，然后发送给B
      3. （数字信封反解流程）用 B的私钥 解密 信封 ，得到 对称密钥
      4. 再以 对称密钥 解密原文

    - PGP还可用于==文件存储加密==